---
title: "Progress Memo 2"
subtitle: |
  | Final Project 
  | Data Science 1 with R (STAT 301-2)
author: "Miracle Ramos"
pagetitle: "PM1 Miracle Ramos"
date: today

format:
  html:
    toc: true
    toc-depth: 4
    toc-location: left
    embed-resources: true
    link-external-newwindow: true

execute:
  warning: false

from: markdown+emoji
reference-location: margin
citation-location: margin
---



::: {.callout-tip icon=false}

## Github Repo Link

[Miracle's GitHub Repo Link (miracleramos2025)](https://github.com/stat301-2-2025-winter/final-project-2-miracleramos2025.git)

:::

## Prediction problem

**Research Objective:** The goal of this project is to develop a predictive model that forecasts Airbnb rental prices in New York City. Specifically, I will predict the price of an Airbnb listing based on various features such as location, property type, number of reviews, availability, and host details.

**Prediction Type:** This is a regression problem, where the target variable will be the `price` of an Airbnb listing. The model will be trained using supervised learning techniques.

**Motivation:** As Airbnb continues to be a dominant platform in the short-term rental market, understanding pricing trends is crucial for both hosts and guests. This project allows me to explore machine learning techniques while analyzing factors that contribute to Airbnb pricing in NYC. By predicting prices accurately, I aim to provide insights into market trends and pricing strategies.

## Data Overview

#### Data source
**Primary Dataset:** The dataset used for this project is sourced from [Kaggle: New York City Airbnb Open Data](https://www.kaggle.com/datasets/dgomonov/new-york-city-airbnb-open-data?select=AB_NYC_2019.csv). It contains details about Airbnb listings in NYC for the year 2019, including host information, listing details, location, and pricing metrics.

**Datasets Used:**

  1. `AB_NYC_2019.csv` â€“ Contains information on Airbnb listings, including host details, property characteristics, location, number of reviews, and pricing.

**Description:** 
This dataset provides a comprehensive view of Airbnb activity in NYC, making it suitable for building a model that predicts listing prices based on various factors.

**Citations:** <br>

  - Kaggle: Dgomonov, [New York City Airbnb Open Data](https://www.kaggle.com/datasets/dgomonov/new-york-city-airbnb-open-data?select=AB_NYC_2019.csv)


#### Data Quality Check

```{r}
#| label: tbl-data-quality-check
#| tbl-cap: "Data Quality Check"
#| echo: false

# load packages
library(knitr)

# load saved data summary table
load("data/dataset_summary.rda")
load("data/var_type_summary.rda")

# display
kable(dataset_summary, caption = "Data Quality Summary")
kable(var_type_summary, caption = "Variable Type Summary")

```


**Variable Types:** <br>

  - **Categorical Variables:** There are 5 categorical variables, `name`, `host_name`, `neighborhood_group`, `neighborhood`, and `room_type` in the New York City Airbnb Open Data dataset.
  - **Date Variables:** `last_review` is the only date variable in the New York City Airbnb Open Data dataset.
  - **Numerical Variables:** There are 10 numerical variables, `id`, `host_id`, `latitude`, `longitude`, `price`, `minimum_nights`, `number_of_reviews`, `reviews_per_month`, `calculated_host_listings_count`, and `availability_365` in the New York City Airbnb Open Data dataset.

**Missingness** <br>

  - The dataset has an overall missingness percentage of **2.57%**.
  - The `reviews_per_month` column has **10,052** missing values, which corresponds to listings with no reviews.
  - The `last_review` column also has **10,052** missing values, indicating that these listings have never received a review.
  - No missing values were found in critical numeric columns like `price`, `minimum_nights`, and `availability_365`.

**Data Tidying** <br>

  - Fill missing values in `reviews_per_month` with 0 where no reviews exist.
  - Convert `last_review` to a standardized date format.
  - Encode categorical variables like `neighbourhood_group` and `room_type` for modeling.


## Target variable analysis
**Target Variable:** <br>
The primary target variable for this analysis is `price`, a numerical variable representing the nightly cost of an Airbnb listing. Understanding price variations is important for both hosts and guests because it reflects market trends, demand, and listing characteristics. Predicting price based on key features such as location, property type, and availability will help identify factors that influence Airbnb rental pricing in New York City.

**Univariate Analysis:** <br>
```{r}
#| label: tbl-price-summary
#| tbl-cap: "Price Summary"
#| echo: false

# Load required packages
library(ggplot2)
library(dplyr)
library(knitr)
library(readr)

# Load dataset
airbnb_data <- read_csv("data/AB_NYC_2019.csv")

# Summarize price data
price_summary <- airbnb_data %>% summarize(
  mean_price = mean(price, na.rm = TRUE),
  median_price = median(price, na.rm = TRUE),
  max_price = max(price, na.rm = TRUE),
  min_price = min(price, na.rm = TRUE),
  std_dev = sd(price, na.rm = TRUE)
)

# Display summary table
kable(price_summary)
```
The **average Airbnb price in NYC is $152.72** but the median is $106, this shows that a few expensive listings raise the average. Prices range from $0 (possibly promotions or errors) to $10,000, with a high standard deviation of $240.15. This indicates large price differences across listings.
  
**Symmetry & Skewness:** <br>
```{r}
#| label: fig-price-dist
#| fig-cap: "Distribution of Airbnb Prices"
#| echo: false

# Plot price distribution
ggplot(airbnb_data, aes(x = price)) +
  geom_density(fill = "slateblue1", alpha = 0.5) +
  xlim(0, 1000) + 
  labs(title = "Density Plot of Airbnb Prices in NYC", x = "Price ($)", y = "Density")

```

The distribution is highly **right-skewed**, with a small number of extremely high priced listings. Most listings fall under $500 per night but outliers significantly increase the maximum price.




**Missingness:** <br>
```{r}
#| label: tbl-price-missing
#| tbl-cap: "Missing Values in Price"
#| echo: false

missing_price <- sum(is.na(airbnb_data$price))
kable(data.frame(Variable = "Price", Missing_Values = missing_price))
```

There are **no missing values** in the `price` variable, all listings have a recorded price. Since the target variable is complete, this will allow for more accurate modeling and analysis.


**Transformations Considered:**<br>

```{r}
#| label: fig-log-price-dist
#| fig-cap: "Log10 Transforation on Distribution of Prices"
#| echo: false

# apply log10 transformation
airbnb_data <- airbnb_data |>
  mutate(log_price = log10(price + 1))

# Plot transformed price distribution
ggplot(airbnb_data, aes(x = log_price)) +
  geom_density(fill = "skyblue1", alpha = 0.5) +
  labs(title = "Log10 Transformation Density of Airbnb Prices", x = "Log10(Price + 1)", y = "Density")

```

The **log10 transformation** of Airbnb prices **helps reduce skewness** and creates a more normalized distribution, making it easier for regression models to capture patterns in the data. The transformed distribution is more symmetric and indicates that extreme price outliers have less influence on the model.


## Analysis Plan
To predict Airbnb listing prices in NYC, I will use six models:

- **Baseline Model**: Predicts the mean price as a simple benchmark.
- **Linear Model**: Establishes a basic regression baseline.
- **Elastic Net Regression**: Balances lasso and ridge penalties for variable selection.
- **Lasso Regression**: Selects the most important predictors by applying strong penalties.
- **Random Forest**: Captures complex relationships with an ensemble of decision trees.
- **Boosted Trees**: Further refines tree-based predictions using boosting techniques.


#### **Preprocessing and Resampling**
- **Data Splitting**: 80% training, 20% testing.
- **Resampling Method**: 10-fold cross-validation to assess model performance.
- **Feature Engineering**:
  - **Recipe 1 (Basic)**: Standardized numerical variables, one-hot encoding for categorical variables.
  - **Recipe 2 (Advanced)**: Adds feature interactions, polynomial terms, and removes redundant predictors.
  
#### **Assessment Metric**
Model performance will be evaluated using **Root Mean Squared Error (RMSE)**, as it emphasizes large errors and aligns with our goal of accurate price prediction.


## Modeling Progress

### **Baseline Model**


### **Linear **

## Misc
  
**Final Project Goals:**

  - Make Final Predictions
  - Interpret Findings & Executive Summary

